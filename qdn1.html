<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qui de nous... ?</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a2e;
            color: #ecf0f1;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .game-container {
            background-color: #16213e;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 800px;
            border: 2px solid #0f3460;
        }

        h1 {
            color: #f1c40f;
            text-transform: uppercase;
        }

        #question-display {
            font-size: 2em;
            color: #3498db;
            margin: 20px 0;
            min-height: 80px;
        }

        #players-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .player-vote-btn {
            background-color: #ff6a88;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .player-vote-btn:hover {
            background-color: #e65275;
        }

        #results-display {
            margin-top: 30px;
        }

        #results-list {
            list-style: none;
            padding: 0;
        }

        #results-list li {
            font-size: 1.2em;
            margin: 10px 0;
            color: #ecf0f1;
        }

        .next-btn {
            background-color: #2ecc71;
            color: white;
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            display: none; /* Initialement caché */
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>Qui de nous... ?</h1>
        
        <div id="setup-container">
            <p>Entrez le nom des joueurs, un par ligne, pour commencer :</p>
            <textarea id="player-names-input" rows="5" placeholder="Joueur 1&#10;Joueur 2&#10;..."></textarea>
            <br>
            <button id="start-game-btn" class="player-vote-btn">Lancer la partie !</button>
        </div>

        <div id="game-round-container" style="display: none;">
            <p><strong>C'est l'heure de voter !</strong></p>
            <p id="question-display"></p>
            <div id="players-buttons"></div>
            <div id="results-display">
                <p>Votes :</p>
                <ul id="results-list"></ul>
            </div>
            <button id="next-question-btn" class="next-btn">Question suivante !</button>
        </div>
    </div>

    <script>
        const questions = [
            "Qui de nous a le plus de chances de devenir millionnaire ?",
            "Qui de nous va le plus regretter ce qu'il a bu ce soir ?",
            "Qui de nous a le plus de chances de finir dans une téléréalité ?",
            "Qui de nous est le plus grand fêtard ?",
            "Qui de nous a le plus de chances de se marier en dernier ?",
            "Qui de nous est le plus hypocondriaque ?",
            "Qui de nous a le plus de chances de devenir un.e chef.fe célèbre ?",
            "Qui de nous est le plus susceptible de tomber en panne au milieu de nulle part ?",
            "Qui de nous se fait le plus souvent ghoster ?",
            "Qui de nous a le plus de chances de devenir célèbre sur TikTok ?",
            "Qui de nous est le plus susceptible de s'endormir ici ?",
            "Qui de nous a le plus de chances de se faire tatouer quelque chose de ridicule ?"
        ];

        let players = [];
        let currentQuestionIndex = 0;
        const votes = {};

        const setupContainer = document.getElementById('setup-container');
        const gameRoundContainer = document.getElementById('game-round-container');
        const startBtn = document.getElementById('start-game-btn');
        const nextBtn = document.getElementById('next-question-btn');
        const questionDisplay = document.getElementById('question-display');
        const playersButtonsDiv = document.getElementById('players-buttons');
        const resultsList = document.getElementById('results-list');

        startBtn.addEventListener('click', () => {
            const playerNames = document.getElementById('player-names-input').value.split('\n').filter(name => name.trim() !== '');
            if (playerNames.length < 2) {
                alert("Veuillez entrer au moins deux joueurs.");
                return;
            }
            players = playerNames;
            setupContainer.style.display = 'none';
            gameRoundContainer.style.display = 'block';
            startGame();
        });

        function startGame() {
            currentQuestionIndex = 0;
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                questionDisplay.textContent = "Fin du jeu ! Merci d'avoir joué.";
                playersButtonsDiv.style.display = 'none';
                nextBtn.style.display = 'none';
                resultsList.innerHTML = '';
                return;
            }

            questionDisplay.textContent = questions[currentQuestionIndex];
            playersButtonsDiv.innerHTML = '';
            resultsList.innerHTML = '';
            nextBtn.style.display = 'none';
            
            votes.length = 0; // Réinitialise les votes
            players.forEach(player => votes[player] = 0);

            players.forEach(player => {
                const btn = document.createElement('button');
                btn.textContent = player;
                btn.classList.add('player-vote-btn');
                btn.addEventListener('click', () => {
                    votes[player]++;
                    displayResults();
                    // Désactive les boutons après le vote
                    playersButtonsDiv.querySelectorAll('button').forEach(button => button.disabled = true);
                    nextBtn.style.display = 'block';
                });
                playersButtonsDiv.appendChild(btn);
            });
        }

        function displayResults() {
            resultsList.innerHTML = '';
            const sortedPlayers = Object.keys(votes).sort((a, b) => votes[b] - votes[a]);
            sortedPlayers.forEach(player => {
                const li = document.createElement('li');
                li.textContent = `${player} : ${votes[player]} vote(s)`;
                resultsList.appendChild(li);
            });
        }

        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            displayQuestion();
        });

    </script>
</body>
</html>
