<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qui de nous... ?</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a2e;
            color: #ecf0f1;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .game-container {
            background-color: #16213e;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 800px;
            border: 2px solid #0f3460;
        }

        h1 {
            color: #f1c40f;
            text-transform: uppercase;
        }

        .section {
            display: none;
        }

        .active {
            display: block;
        }

        #home-screen, #lobby-screen {
            padding: 20px 0;
        }

        .btn {
            background-color: #ff6a88;
            color: white;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #e65275;
        }

        #player-pseudo {
            padding: 10px;
            font-size: 1.1em;
            border-radius: 5px;
            border: none;
            text-align: center;
        }
        
        #lobby-code {
            font-size: 2em;
            letter-spacing: 5px;
            color: #2ecc71;
            margin: 20px 0;
        }

        #lobby-players-list {
            list-style: none;
            padding: 0;
            font-size: 1.2em;
            margin-top: 10px;
        }

        #question-display {
            font-size: 2em;
            color: #3498db;
            margin: 20px 0;
            min-height: 80px;
        }
        
        .player-vote-btn {
            background-color: #ff6a88;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .player-vote-btn:hover {
            background-color: #e65275;
        }

        #results-display {
            margin-top: 30px;
        }

        #results-list {
            list-style: none;
            padding: 0;
        }

        #results-list li {
            font-size: 1.2em;
            margin: 10px 0;
            color: #ecf0f1;
        }

        .next-btn {
            background-color: #2ecc71;
            color: white;
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>Qui de nous... ?</h1>
        
        <div id="home-screen" class="section active">
            <p>Choisis ton pseudo :</p>
            <input type="text" id="player-pseudo" placeholder="Ton pseudo">
            <p>Que veux-tu faire ?</p>
            <button id="create-room-btn" class="btn">Créer un salon</button>
            <button id="join-room-btn" class="btn">Rejoindre un salon</button>
        </div>

        <div id="lobby-screen" class="section">
            <h2>Salon de jeu</h2>
            <p>Code du salon : <span id="lobby-code"></span></p>
            <p>Joueurs dans le salon :</p>
            <ul id="lobby-players-list"></ul>
            <button id="start-game-btn" class="btn">Lancer la partie</button>
        </div>

        <div id="game-round-container" class="section">
            <p><strong>Tour <span id="round-number">1</span> / 15</strong></p>
            <p id="question-display"></p>
            <div id="players-buttons"></div>
            <div id="results-display">
                <p>Votes :</p>
                <ul id="results-list"></ul>
            </div>
            <button id="next-question-btn" class="next-btn">Question suivante !</button>
        </div>
    </div>

    <script>
        const questions = [
            "Qui de nous a le plus de chances de devenir millionnaire ?",
            "Qui de nous va le plus regretter ce qu'il a bu ce soir ?",
            "Qui de nous a le plus de chances de finir dans une téléréalité ?",
            "Qui de nous est le plus grand fêtard ?",
            "Qui de nous a le plus de chances de se marier en dernier ?",
            "Qui de nous est le plus hypocondriaque ?",
            "Qui de nous a le plus de chances de devenir un.e chef.fe célèbre ?",
            "Qui de nous est le plus susceptible de tomber en panne au milieu de nulle part ?",
            "Qui de nous se fait le plus souvent ghoster ?",
            "Qui de nous a le plus de chances de devenir célèbre sur TikTok ?",
            "Qui de nous est le plus susceptible de s'endormir ici ?",
            "Qui de nous a le plus de chances de se faire tatouer quelque chose de ridicule ?",
            "Qui de nous est le plus susceptible de rater son vol ?",
            "Qui de nous est le plus susceptible de perdre ses clés ?",
            "Qui de nous est le plus susceptible de s'endormir ici ?"
        ];

        let players = [];
        let currentQuestionIndex = 0;
        const votes = {};
        const totalRounds = 15;

        const homeScreen = document.getElementById('home-screen');
        const lobbyScreen = document.getElementById('lobby-screen');
        const gameRoundContainer = document.getElementById('game-round-container');

        const pseudoInput = document.getElementById('player-pseudo');
        const createRoomBtn = document.getElementById('create-room-btn');
        const joinRoomBtn = document.getElementById('join-room-btn');
        const lobbyCodeSpan = document.getElementById('lobby-code');
        const lobbyPlayersList = document.getElementById('lobby-players-list');
        const startGameBtn = document.getElementById('start-game-btn');
        const nextBtn = document.getElementById('next-question-btn');
        const questionDisplay = document.getElementById('question-display');
        const playersButtonsDiv = document.getElementById('players-buttons');
        const resultsList = document.getElementById('results-list');
        const roundNumberSpan = document.getElementById('round-number');

        createRoomBtn.addEventListener('click', () => {
            const pseudo = pseudoInput.value.trim();
            if (!pseudo) {
                alert("Veuillez choisir un pseudo !");
                return;
            }
            // Simulation : on crée une liste de joueurs pour le test
            players = [pseudo, "Joueur 2", "Joueur 3", "Joueur 4"];
            
            homeScreen.classList.remove('active');
            lobbyScreen.classList.add('active');
            lobbyCodeSpan.textContent = Math.floor(1000 + Math.random() * 9000); // Code aléatoire non fonctionnel
            updateLobbyList();
        });

        joinRoomBtn.addEventListener('click', () => {
            const pseudo = pseudoInput.value.trim();
            if (!pseudo) {
                alert("Veuillez choisir un pseudo !");
                return;
            }
            // Simulation : on rejoint une room existante
            const roomCode = prompt("Entrez le code du salon :");
            if (roomCode) {
                 players = ["Joueur 1", "Joueur 2", pseudo, "Joueur 4"];
                 homeScreen.classList.remove('active');
                 lobbyScreen.classList.add('active');
                 lobbyCodeSpan.textContent = roomCode;
                 updateLobbyList();
                 startGameBtn.style.display = 'none'; // Seul le créateur peut lancer la partie
            }
        });

        startGameBtn.addEventListener('click', () => {
            lobbyScreen.classList.remove('active');
            gameRoundContainer.classList.add('active');
            startGame();
        });

        function updateLobbyList() {
            lobbyPlayersList.innerHTML = '';
            players.forEach(player => {
                const li = document.createElement('li');
                li.textContent = player;
                lobbyPlayersList.appendChild(li);
            });
        }

        function startGame() {
            currentQuestionIndex = 0;
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex >= totalRounds) {
                questionDisplay.textContent = "Fin du jeu ! Merci d'avoir joué.";
                playersButtonsDiv.style.display = 'none';
                nextBtn.style.display = 'none';
                resultsList.innerHTML = '';
                return;
            }

            roundNumberSpan.textContent = currentQuestionIndex + 1;
            questionDisplay.textContent = questions[currentQuestionIndex];
            playersButtonsDiv.innerHTML = '';
            resultsList.innerHTML = '';
            nextBtn.style.display = 'none';
            
            players.forEach(player => votes[player] = 0);

            players.forEach(player => {
                const btn = document.createElement('button');
                btn.textContent = player;
                btn.classList.add('player-vote-btn');
                btn.addEventListener('click', () => {
                    votes[player]++;
                    displayResults();
                    playersButtonsDiv.querySelectorAll('button').forEach(button => button.disabled = true);
                    nextBtn.style.display = 'block';
                });
                playersButtonsDiv.appendChild(btn);
            });
        }

        function displayResults() {
            resultsList.innerHTML = '';
            const sortedPlayers = Object.keys(votes).sort((a, b) => votes[b] - votes[a]);
            sortedPlayers.forEach(player => {
                const li = document.createElement('li');
                li.textContent = `${player} : ${votes[player]} vote(s)`;
                resultsList.appendChild(li);
            });
        }

        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            displayQuestion();
        });

    </script>
</body>
</html>
